<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>StandBy mimic — rotated (seconds)</title>
<style>
:root{
  --rot:90deg;
  --bg:#000;
  --fg:#fff;
  --land-w:100vh;
  --land-h:100vw;
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
}
html,body{
  height:100%;margin:0;background:var(--bg);color:var(--fg);overflow:hidden;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
  user-select:none; -webkit-user-select:none;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text",system-ui,sans-serif;
  text-size-adjust:100%; -webkit-text-size-adjust:100%;
}
.time{font-size:clamp(48px,calc(var(--land-w)*0.16),160px);line-height:1.05}
.date{font-size:clamp(18px,calc(var(--land-w)*0.045),42px);line-height:1.2;opacity:.9;margin-top:.5rem}
#rotator{position:fixed;left:50%;top:50%;width:var(--land-w);height:var(--land-h);transform:translate(-50%,-50%) rotate(var(--rot));transform-origin:center;display:flex;align-items:center;justify-content:center;box-sizing:border-box;padding-top:calc(var(--safe-top)+8px);padding-bottom:calc(var(--safe-bottom)+8px)}
.glass-text{color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.65),0 0 8px rgba(255,255,255,.18)}
@supports(-webkit-background-clip:text){.glass-text{background:linear-gradient(120deg,rgba(255,255,255,.98),rgba(210,230,255,.95),rgba(255,255,255,.98));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:rgba(255,255,255,.92)}}
.clock{
  --tilt-x:0deg;--tilt-y:0deg;--glass-alpha:.1;--glass-blur:12px;--glass-sat:1.2;
  width:calc(var(--land-w)*.55);max-width:900px;min-width:420px;
  height:calc(var(--land-h)*.5);max-height:640px;min-height:260px;
  padding:2.2rem 2.8rem;border-radius:36px;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;
  transform:perspective(800px) rotateX(var(--tilt-x)) rotateY(var(--tilt-y));transition:transform .15s ease-out,box-shadow .15s ease-out;box-sizing:border-box;
  background:
    linear-gradient(to top,rgba(255,255,255,calc(var(--glass-alpha)*2)) 0%,rgba(255,255,255,calc(var(--glass-alpha)*2)) 22%,rgba(255,255,255,.02) 55%),
    linear-gradient(to bottom,rgba(255,255,255,calc(var(--glass-alpha)*2)) 0%,rgba(255,255,255,calc(var(--glass-alpha)*2)) 22%,rgba(255,255,255,.02) 55%),
    linear-gradient(to left,rgba(255,255,255,calc(var(--glass-alpha)*2)) 0%,rgba(255,255,255,calc(var(--glass-alpha)*2)) 22%,rgba(255,255,255,.02) 55%),
    linear-gradient(to right,rgba(255,255,255,calc(var(--glass-alpha)*2)) 0%,rgba(255,255,255,calc(var(--glass-alpha)*2)) 22%,rgba(255,255,255,.02) 55%);
  backdrop-filter:blur(var(--glass-blur)) saturate(var(--glass-sat));
  -webkit-backdrop-filter:blur(var(--glass-blur)) saturate(var(--glass-sat));
  box-shadow:inset 0 0 0 1px rgba(255,255,255,calc(var(--glass-alpha)*2.5)),inset 0 0 calc(var(--glass-blur)*1.2) rgba(255,255,255,calc(var(--glass-alpha)*1.6)),0 0 calc(var(--glass-blur)*1.4) rgba(255,255,255,calc(var(--glass-alpha)*.6));
}
#settingsDrawer{position:fixed;top:0;bottom:0;right:0;width:320px;max-width:80vw;background:rgba(20,20,20,.92);color:#fff;border-top-left-radius:14px;border-bottom-left-radius:14px;transform:translateX(100%);transition:transform .35s cubic-bezier(.22,.9,.27,1);box-shadow:-10px 0 30px rgba(0,0,0,.6);z-index:1000;pointer-events:none;overflow:hidden}
#settingsDrawer.open{transform:translateX(0);pointer-events:auto}
#settingsDrawer .row{display:flex;align-items:center;gap:8px;margin-top:10px}
#settingsDrawer label{flex:1;font-size:14px}
#settingsDrawer input[type=range]{width:140px}
.closeBtn{position:absolute;left:10px;top:8px;background:transparent;border:0;color:#fff;font-size:16px}
</style>
</head>
<body>
<div id="settingsDrawer" aria-hidden="true">
  <div id="settingsInner" style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) rotate(var(--rot));display:flex;flex-direction:column;gap:14px;width:260px;">
    <button class="closeBtn" id="closeDrawer">✕</button>
    <div><strong>Settings</strong></div>
    <div class="row"><label><input type="checkbox" id="toggleSeconds" checked> 秒を表示</label></div>
    <div class="row"><label><input type="checkbox" id="toggleWeekday" checked> 曜日を表示</label></div>
    <div class="row"><label>透明度</label><input type="range" id="alpha" min="0.02" max="0.3" step="0.01" value="0.1"></div>
    <div class="row"><label>屈折(ぼかし)</label><input type="range" id="blur" min="4" max="24" step="1" value="12"></div>
    <div class="row"><label>傾きの強さ</label><input type="range" id="tiltStrength" min="0" max="12" step="0.5" value="6"></div>
  </div>
</div>
<div id="drawerOverlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:900"></div>
<div id="rotator">
  <div class="clock">
    <div class="time glass-text" id="time">--:--:--</div>
    <div class="date glass-text" id="date">----</div>
  </div>
</div>
<script>
(function(){
  const timeEl=document.getElementById('time');
  const dateEl=document.getElementById('date');
  const toggleSeconds=document.getElementById('toggleSeconds');
  const toggleWeekday=document.getElementById('toggleWeekday');
  const alphaRange=document.getElementById('alpha');
  const blurRange=document.getElementById('blur');
  const tiltStrengthRange=document.getElementById('tiltStrength');
  const settingsDrawer=document.getElementById('settingsDrawer');
  const drawerOverlay=document.getElementById('drawerOverlay');
  const closeDrawer=document.getElementById('closeDrawer');
  function two(n){return String(n).padStart(2,'0')}
  function updateClock(){
    const d=new Date();
    const h=two(d.getHours()),m=two(d.getMinutes()),s=two(d.getSeconds());
    timeEl.textContent=toggleSeconds.checked?`${h}:${m}:${s}`:`${h}:${m}`;
    const y=d.getFullYear(),mo=two(d.getMonth()+1),da=two(d.getDate());
    const wd=['日','月','火','水','木','金','土'][d.getDay()];
    dateEl.textContent=toggleWeekday.checked?`${y}/${mo}/${da}（${wd}）`:`${y}/${mo}/${da}`;
  }
  function applyGlass(){
    const c=document.querySelector('.clock');
    c.style.setProperty('--glass-alpha',alphaRange.value);
    c.style.setProperty('--glass-blur',blurRange.value+'px');
  }
  alphaRange.addEventListener('input',applyGlass);
  blurRange.addEventListener('input',applyGlass);
  applyGlass();
  function pointerTilt(e){
    const rot=parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--rot'))||0;
    const cx=innerWidth/2,cy=innerHeight/2;
    let vx=e.clientX-cx,vy=e.clientY-cy;
    const r=-rot*Math.PI/180;
    const rx=Math.cos(r)*vx-Math.sin(r)*vy;
    const ry=Math.sin(r)*vx+Math.cos(r)*vy;
    const hw=innerWidth/2,hh=innerHeight/2;
    const nx=Math.max(-1,Math.min(1,rx/hw));
    const ny=Math.max(-1,Math.min(1,ry/hh));
    const s=parseFloat(tiltStrengthRange.value);
    const c=document.querySelector('.clock');
    c.style.setProperty('--tilt-x',(-ny*s).toFixed(2)+'deg');
    c.style.setProperty('--tilt-y',(nx*s).toFixed(2)+'deg');
  }
  document.addEventListener('pointermove',pointerTilt);
  function tick(){updateClock();setTimeout(()=>setInterval(updateClock,1000),1000-new Date().getMilliseconds())}
  tick();
  function applyVars(){
    const portrait=innerHeight>innerWidth;
    document.documentElement.style.setProperty('--rot',portrait?'90deg':'0deg');
    document.documentElement.style.setProperty('--land-w',(portrait?innerHeight:innerWidth)+'px');
    document.documentElement.style.setProperty('--land-h',(portrait?innerWidth:innerHeight)+'px');
  }
  addEventListener('resize',applyVars);applyVars();
  function openDrawer(){settingsDrawer.classList.add('open');drawerOverlay.style.display='block'}
  function closeDrawerFn(){settingsDrawer.classList.remove('open');drawerOverlay.style.display='none'}
  let sx=null;
  addEventListener('touchstart',e=>{const t=e.touches[0];if(t&&t.clientX>innerWidth-24)sx=t.clientX},{passive:true});
  addEventListener('touchmove',e=>{if(sx!==null&&e.touches[0].clientX-sx<-40){openDrawer();sx=null}},{passive:true});
  addEventListener('touchend',()=>sx=null);
  closeDrawer.addEventListener('click',closeDrawerFn);
  drawerOverlay.addEventListener('click',closeDrawerFn);
})();
</script>
</body>
</html>
